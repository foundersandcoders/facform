<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cwHandlers.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: cwHandlers.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var request = require('request');
var tokens = require('./cwTokens.json');

/**
 * @namespace cwHandlers
 */
var handlers = {
/**@method
 * @description Gets a new Kata from CodeWars
 * @param request {object} - request
 * @param reply {object} - reply
 * @returns {object} formObject - Strategy of your level if set to random or default
 * @returns {object} formObject - Strategy set to workout if else
 */
  newkata: function (req, reply) {
    var path = req.params;
    var kyuLevel = path.kyuLevel;
    var uriConfig = path.config;
    var formObject;

    if (kyuLevel === 'random' || kyuLevel === 'default') {
      formObject = {
        strategy: kyuLevel
      };
    }
    else {
      formObject = {
        strategy: 'kyu_' + kyuLevel + '_workout'
      };
    }

    var options = {
      uri: uriConfig || 'https://www.codewars.com/api/v1/code-challenges/javascript/train',
      headers: {
        Authorization: tokens.codewars.claire.token,
        // Authorization: tokens.codewars.simon.token,
      },
      form: formObject
    };

    var cwData = {};

    request.post(options, function (err, response, body) {
      if (err) {
        return reply(err);
      }
      var data = JSON.parse(body);

      cwData = {
        name: data.name,
        level: data.rank,
        description: data.description,
        id: data.session.projectId,
        setup: data.session.setup,
        link: data.href
      };

      reply(cwData);
    });
  },

  user: function (req, reply) {
    var route = req.params.route || 'https://www.codewars.com/api/v1/users/';
    var options = {
      method: 'GET',
      uri: route + req.params.user,
      headers: {
        Authorization: tokens.codewars.claire.token
      }
    };
    request(options, function (err, response, body) {
      if (err) {
        return reply(err);
      }
      reply(JSON.parse(body));
    });
  }

};

module.exports = handlers;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="cwHandlers.html">cwHandlers</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Fri Jul 03 2015 15:11:25 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
